name: labels-sync
on:
  workflow_call:
    inputs:
      labels-file:
        description: 'path to custom labels file'
        default: '.github/labels.yaml'
        required: false
        type: string
      delete-other-labels:
        description: 'delete labels not in the config files'
        required: false
        type: boolean
        default: true
    secrets:
      github-token:
        description: 'GitHub token with issues write permissions'
        required: true
jobs:
  run:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write
    steps:
      - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
      - uses: EndBug/label-sync@52074158190acb45f3077f9099fea818aa43f97a # v2.3.3
        with:
          config-file: |
            https://raw.githubusercontent.com/fluxcd/community/main/.github/standard-labels.yaml
            ${{ inputs.labels-file }}
          delete-other-labels: ${{ inputs.delete-other-labels }}
          token: ${{ secrets.github-token }}
